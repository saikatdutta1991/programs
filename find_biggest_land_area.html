<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Find Biggest Land Area</title>
    <style>
      table {
        border-collapse: collapse;
      }
      td {
        width: 30px;
        height: 30px;
        text-align: center;
        vertical-align: middle;
        border: 1px solid #000;
      }
      .water {
        background-color: blue;
      }
      .land {
        background-color: green;
      }
      .flag::before {
        content: "\1F6A9";
        font-size: 40px;
      }
      @keyframes stepBlink {
        to {
          opacity: 0.5;
        } /* or use opacity: 0 */
      }
      #landTable .blink {
        animation: stepBlink 0.6s steps(2, start) infinite;
      }
    </style>
  </head>
  <body>
    <h1>Find Biggest Land Area</h1>
    <label for="rowsInput">Rows:</label>
    <input type="number" id="rowsInput" value="10" min="1" />
    <label for="colsInput">Columns:</label>
    <input type="number" id="colsInput" value="10" min="1" />
    <button onclick="generateTable()">Generate Table</button>
    <br /><br />
    <table id="landTable">
      <!-- Table cells will be generated by JavaScript -->
    </table>
    <br />
    <button onclick="highlightBiggestLandArea()">
      Highlight Biggest Land Area
    </button>
    <script>
      const cellTypes = [{ type: "water" }, { type: "land" }, { type: "flag" }];
      let tableData = [];
      function generateTable() {
        const tableElm = document.getElementById("landTable");
        tableElm.innerHTML = ""; // Clear existing table
        const rows = parseInt(document.getElementById("rowsInput").value);
        const cols = parseInt(document.getElementById("colsInput").value);

        for (let i = 0; i < rows; i++) {
          const row = document.createElement("tr");
          for (let j = 0; j < cols; j++) {
            const cell = document.createElement("td");
            const randomType =
              cellTypes[Math.floor(Math.random() * (cellTypes.length - 1))]
                .type;
            cell.classList.add(randomType);
            row.appendChild(cell);
            if (!tableData[i]) tableData[i] = [];
            tableData[i][j] = { type: randomType, visited: false };
          }
          tableElm.appendChild(row);
        }
      }

      let areaMap = new Map();
      function highlightBiggestLandArea() {
        let count = 1;
        for (let i = 0; i < tableData.length; i++) {
          for (let j = 0; j < tableData[i].length; j++) {
            if (isValidCell(i, j)) {
              let key = `area_${count}`;
              areaMap.set(key, { size: 0, cells: [] });
              let size = exploreLand(key, i, j);
              if (size > 0) {
                areaMap.get(key).size = size;
              }
              count++;
            }
          }
        }

        let biggestAreaKey = null;
        let biggestSize = 0;
        for (let [key, value] of areaMap.entries()) {
          if (value.size > biggestSize) {
            biggestSize = value.size;
            biggestAreaKey = key;
          }
        }
        if (biggestAreaKey) {
          const cells = areaMap.get(biggestAreaKey).cells;
          cells.forEach(([i, j]) => {
            const tableElm = document.getElementById("landTable");
            tableElm.rows[i].cells[j].classList.add("blink");
          });
        }
      }

      function exploreLand(key, i, j) {
        if (isValidCell(i, j)) {
          areaMap.get(key).cells.push([i, j]);
          tableData[i][j].visited = true;
          const tableElm = document.getElementById("landTable");
          tableElm.rows[i].cells[j].classList.add("flag");
          let size = 1;
          size += exploreLand(key, i + 1, j);
          size += exploreLand(key, i - 1, j);
          size += exploreLand(key, i, j + 1);
          size += exploreLand(key, i, j - 1);
          return size;
        }
        return 0;
      }

      function isValidCell(i, j) {
        return (
          i >= 0 &&
          i < tableData.length &&
          j >= 0 &&
          j < tableData[0].length &&
          tableData[i][j].type === "land" &&
          !tableData[i][j].visited
        );
      }
    </script>
  </body>
</html>
